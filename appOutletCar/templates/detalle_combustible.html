{% extends "base.html" %}

{% block title %}Coches - {{ combustible.nomCombustible }}{% endblock %}

{% block content %}
    <main class="contenedor">
        <h2 class="titulo">Coches con combustible: {{ combustible.nomCombustible }}</h2>
        
        <div class="contenedorCoche">
            {% for coche in coches %}
                <div class="cocheDetalle">
                    {% if coche.foto %}
                        <div class="foto">
                            <img src="{{ coche.foto.url }}" alt="{{ coche.modelo }}">
                        </div>
                    {% endif %}

                    <div class="infoCoche">
                        <h3>{{ coche.modelo }}</h3>
                        <p><strong>Marca:</strong> 
                            <a href="{% url 'verMarca' coche.idMarca.pk %}" class="llevarMarca">
                                {{ coche.idMarca.nomMarca }}
                            </a>
                        </p>
                        <ul>
                            {% for cat in coche.idCat.all %}
                                <li><a href="{%url 'detalle_categoria' cat.pk %}">{{cat.nomCat}}</a></li>
                            {% empty %}
                                <li>Sin categorías.</li>
                            {% endfor %}
                        </ul>
                        <p><strong>Año:</strong> {{ coche.anio }}</p>
                        <p><strong>Kilómetros:</strong> {{ coche.km }} km</p>
                        <p><strong>Precio:</strong> {{ coche.idPrecio.precio }}€</p>

                        {% if user.is_authenticated %}
                            <a href="{% url 'eliminar_coche' pk=coche.pk %}" class="btn-eliminar">
                                Eliminar
                            </a>
                        {% endif %} 
                    </div>
                </div>
            {% empty %}
                <p>No se encontraron coches para este tipo de combustible.</p>
            {% endfor %}
        </div>

    </main>
{% endblock %}